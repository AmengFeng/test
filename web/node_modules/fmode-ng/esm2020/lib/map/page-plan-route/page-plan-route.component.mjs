
    /**
     * @copyright © 未来飞马 © 未来全栈 www.fmode.cn 
     * 版权所有 © 未来飞马 © 江西脑控科技有限公司 Copyright © Fmode Technology Co., Ltd.
     * 保留所有权利 All Rights Reserved.
     * /home/ryan/workspace/nova/nova-admin/dist/fmode-ng/esm2020/lib/map/page-plan-route/page-plan-route.component.mjs
     */
    import{Component}from"@angular/core";import Parse from"parse";import*as AMapLoader from"@amap/amap-jsapi-loader";import*as i0 from"@angular/core";import*as i1 from"@angular/common";import*as i2 from"@ionic/angular";import*as i3 from"../comp-poi-picker/comp-poi-picker.component";window._AMapSecurityConfig={securityJsCode:"32aa3f4ab0fa0061de03edd4eafdd50a"};export class PagePlanRouteComponent{constructor(){this.placeList=[],this.currentTab="place",this.addNewPlace(),this.addNewPlace(),this.currentTab="plan"}addNewPlace(){this.placeList?.length>=1?this.placeList.push({name:"秋水广场",address:"南昌市秋水广场",location:new Parse.GeoPoint({latitude:28.682634,longitude:115.86273})}):this.placeList.push({name:"八一广场",address:"南昌市八一广场",location:new Parse.GeoPoint({latitude:28.673856,longitude:115.904477})})}ngAfterViewInit(){}async initMap(){await this.createMap(),this.goAndMarkPlace(this.placeList[0])}async createMap(){this.AMap=await AMapLoader.load({key:"473b52010df7d3a32db0a2f5db245c8e",version:"2.0"}),this.map=new this.AMap.Map("container-plan")}goAndMarkPlace(n){this.map.setCenter([n.location.latitude,n.location.longitude]),this.map.setZoom(18),n.marker||(n.marker=new this.AMap.Marker({position:[n.location.latitude,n.location.longitude]}),this.map.add(n.marker))}clearMark(n){n?.marker?.remove()}planRoute(n,e){let a;this.map.plugin(["AMap.Transfer"],(()=>{let t={map:this.map,city:"南昌市",panel:"panel",policy:this.AMap.TransferPolicy.LEAST_TIME};a=new this.AMap.Transfer(t);let o=new this.AMap.LngLat(n.location.longitude,n.location.latitude),i=new this.AMap.LngLat(e.location.longitude,e.location.latitude);a.search(o,i,((n,e)=>{"complete"===n?(console.log("绘制公交路线完成："),console.log(e)):console.error("公交路线数据查询失败"+e)}))}))}async createPlan(){await this.initMap(),this.planRoute(this.placeList[0],this.placeList[1])}}PagePlanRouteComponent.ɵfac=i0.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.1.0",ngImport:i0,type:PagePlanRouteComponent,deps:[],target:i0.ɵɵFactoryTarget.Component}),PagePlanRouteComponent.ɵcmp=i0.ɵɵngDeclareComponent({minVersion:"14.0.0",version:"15.1.0",type:PagePlanRouteComponent,selector:"app-page-plan-route",ngImport:i0,template:'<ion-segment value="place">\n    <ion-segment-button (click)="currentTab=\'place\'" value="place">\n      <ion-label>景点选择</ion-label>\n    </ion-segment-button>\n    <ion-segment-button (click)="currentTab=\'plan\'" value="plan">\n      <ion-label>路线规划</ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  \n\n<ng-container *ngIf="currentTab==\'place\'">\n    <h1>选择旅游计划景点</h1>\n\n    <ng-container *ngFor="let place of placeList">\n        <ion-card>\n            <h2>{{place?.name}}</h2>\n            <span *ngIf="place.address">详细地址：{{place.address}}</span>\n            <span *ngIf="place.location">地图坐标：{{place.location.latitude}},{{place.location.longitude}}</span>\n            <fm-map-poi-picker [(name)]="place.name" [(address)]="place.address" [(location)]="place.location"></fm-map-poi-picker>\n        </ion-card>\n    </ng-container>\n    <ion-button (click)="addNewPlace()" expand="block">添加新景点</ion-button>\n</ng-container>\n\n<ng-container *ngIf="currentTab==\'plan\'">\n    <ion-button (click)="createPlan()" expand="block">创建规划路线</ion-button>\n\n    <div id="container-plan"></div>\n    <div id="panel"></div>\n</ng-container>\n\n',styles:["#container-plan{width:100%;height:40%}#panel{width:100%;height:50%}\n"],dependencies:[{kind:"directive",type:i1.NgForOf,selector:"[ngFor][ngForOf]",inputs:["ngForOf","ngForTrackBy","ngForTemplate"]},{kind:"directive",type:i1.NgIf,selector:"[ngIf]",inputs:["ngIf","ngIfThen","ngIfElse"]},{kind:"component",type:i2.IonButton,selector:"ion-button",inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]},{kind:"component",type:i2.IonCard,selector:"ion-card",inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]},{kind:"component",type:i2.IonLabel,selector:"ion-label",inputs:["color","mode","position"]},{kind:"component",type:i2.IonSegment,selector:"ion-segment",inputs:["color","disabled","mode","scrollable","selectOnFocus","swipeGesture","value"]},{kind:"component",type:i2.IonSegmentButton,selector:"ion-segment-button",inputs:["disabled","layout","mode","type","value"]},{kind:"directive",type:i2.SelectValueAccessor,selector:"ion-range, ion-select, ion-radio-group, ion-segment, ion-datetime"},{kind:"component",type:i3.CompPoiPickerComponent,selector:"fm-map-poi-picker",inputs:["name","address","location"],outputs:["nameChange","addressChange","locationChange"]}]}),i0.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.1.0",ngImport:i0,type:PagePlanRouteComponent,decorators:[{type:Component,args:[{selector:"app-page-plan-route",template:'<ion-segment value="place">\n    <ion-segment-button (click)="currentTab=\'place\'" value="place">\n      <ion-label>景点选择</ion-label>\n    </ion-segment-button>\n    <ion-segment-button (click)="currentTab=\'plan\'" value="plan">\n      <ion-label>路线规划</ion-label>\n    </ion-segment-button>\n  </ion-segment>\n  \n\n<ng-container *ngIf="currentTab==\'place\'">\n    <h1>选择旅游计划景点</h1>\n\n    <ng-container *ngFor="let place of placeList">\n        <ion-card>\n            <h2>{{place?.name}}</h2>\n            <span *ngIf="place.address">详细地址：{{place.address}}</span>\n            <span *ngIf="place.location">地图坐标：{{place.location.latitude}},{{place.location.longitude}}</span>\n            <fm-map-poi-picker [(name)]="place.name" [(address)]="place.address" [(location)]="place.location"></fm-map-poi-picker>\n        </ion-card>\n    </ng-container>\n    <ion-button (click)="addNewPlace()" expand="block">添加新景点</ion-button>\n</ng-container>\n\n<ng-container *ngIf="currentTab==\'plan\'">\n    <ion-button (click)="createPlan()" expand="block">创建规划路线</ion-button>\n\n    <div id="container-plan"></div>\n    <div id="panel"></div>\n</ng-container>\n\n',styles:["#container-plan{width:100%;height:40%}#panel{width:100%;height:50%}\n"]}]}],ctorParameters:function(){return[]}});
var MODULE_PATH_NEED = `6K+l5paH5Lu25piv5pys6aG555uu55qE5LiA6YOo5YiGIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBDb21wb25lbnRzIGluIEZtb2RlIEluYy4KICAgIOeJiOadg+aJgOaciSDCqSDmnKrmnaXpo57pqawgwqkg5rGf6KW/6ISR5o6n56eR5oqA5pyJ6ZmQ5YWs5Y+4IENvcHlyaWdodCDCqSBGbW9kZSBUZWNobm9sb2d5IENvLiwgTHRkLgogICAg5L+d55WZ5omA5pyJ5p2D5YipIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgICDkuKXnpoHlnKjmnKrnu4/mjojmnYPnmoTmg4XlhrXkuIvvvIzpgJrov4fku7vkvZXlqpLku4vlpI3liLbmraTmlofku7YgVW5hdXRob3JpemVkIGNvcHlpbmcgb2YgdGhpcyBmaWxlLCB2aWEgYW55IG1lZGl1bSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkCiAgICDor6Xmlofku7bmmK/kuJPmnInnmoTmnLrlr4bmlofku7YgUHJvcHJpZXRhcnkgYW5kIGNvbmZpZGVudGlhbAogICAKICAgIENvcHlyaWdodCAyMDIxLW5vdyBGbW9kZSBJbmMuIHN1cHBvcnRAZm1vZGUuY24uIDE4NjA3MDA3MDczLgogICAg5L+d55WZ5omA5pyJ5p2D5YipIEFsbCByaWdodHMgcmVzZXJ2ZWQuCgogICAgUEFUSDovaG9tZS9yeWFuL3dvcmtzcGFjZS9ub3ZhL25vdmEtYWRtaW4vZGlzdC9mbW9kZS1uZy9lc20yMDIwL2xpYi9tYXAvcGFnZS1wbGFuLXJvdXRlL3BhZ2UtcGxhbi1yb3V0ZS5jb21wb25lbnQubWpz`
    
